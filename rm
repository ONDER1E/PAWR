import sys

def delete_flight_plan(file_path, callsign):
    with open(file_path, 'r') as file:
        content = file.read()

    if callsign in content:
        lines = content.split('\n')
        for i, line in enumerate(lines):
            if callsign in line:
                callsign_pos = i - 1
                
        while callsign_pos < len(lines) and lines[callsign_pos] != "":
            lines.pop(callsign_pos)
            
        lines.pop(callsign_pos)

        with open(file_path, 'w') as file:
            file.write('\n'.join(lines))
        
        print(f"Flight plan with Callsign {callsign} deleted successfully.")
        return 1
    else:
        return 0

if __name__ == "__main__":
    file_path_arrival = 'Arrival.yaml'
    file_path_departure = 'Departure.yaml'

    if len(sys.argv) > 1:
        callsign_to_delete = sys.argv[1]
    else:
        callsign_to_delete = input("Enter Callsign to delete: ")

    arrival = delete_flight_plan(file_path_arrival, callsign_to_delete)
    departure = delete_flight_plan(file_path_departure, callsign_to_delete)

    if arrival == 0 and departure == 0:
        print(f"Flight plan with Callsign {callsign_to_delete} unable to delete.")
